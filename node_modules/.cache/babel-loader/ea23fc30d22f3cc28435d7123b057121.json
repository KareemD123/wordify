{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Kareem\\\\wordify3\\\\wordify\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Kareem\\\\wordify3\\\\wordify\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import tokenService from\"./tokenService\";var BASE_URL=\"/api/users/\";function signup(user){console.log(\"I made it to the signup\");return fetch(BASE_URL+\"signup\",{method:\"POST\",headers:new Headers({\"Content-Type\":\"application/json\"}),body:JSON.stringify(user)}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var x;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"we got a result! \"+res);if(!res.ok){_context.next=14;break;}_context.prev=2;_context.next=5;return res.json();case 5:x=_context.sent;console.log(x);return _context.abrupt(\"return\",x);case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);console.log(\"this is the catch err\"+_context.t0);case 13:throw new Error(\"Email already taken!\");case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function(_x){return _ref.apply(this,arguments);};}()).then(function(_ref2){var token=_ref2.token;console.log(\"this is the token part of signup function\"+token);tokenService.setToken(token);});// The above could have been written as\n//.then((token) => token.token);\n}function getUser(){return tokenService.getUserFromToken();}function logout(){tokenService.removeToken();}function login(creds){return fetch(BASE_URL+\"login\",{method:\"POST\",headers:new Headers({\"Content-Type\":\"application/json\"}),body:JSON.stringify(creds)}).then(function(res){// Valid login if we have a status of 2xx (res.ok)\nif(res.ok)return res.json();throw new Error(\"Bad Credentials!\");}).then(function(_ref3){var token=_ref3.token;return tokenService.setToken(token);});}function test(user){console.log(\"this is the test function! \"+user);}export default{signup:signup,getUser:getUser,logout:logout,login:login,test:test};","map":{"version":3,"sources":["C:/Users/Kareem/wordify3/wordify/src/services/userService.js"],"names":["tokenService","BASE_URL","signup","user","console","log","fetch","method","headers","Headers","body","JSON","stringify","then","res","ok","json","x","Error","token","setToken","getUser","getUserFromToken","logout","removeToken","login","creds","test"],"mappings":"6TAAA,MAAOA,CAAAA,YAAP,KAAyB,gBAAzB,CAEA,GAAMC,CAAAA,QAAQ,CAAG,aAAjB,CAEA,QAASC,CAAAA,MAAT,CAAgBC,IAAhB,CAAsB,CACpBC,OAAO,CAACC,GAAR,CAAY,yBAAZ,EACA,MAAOC,CAAAA,KAAK,CAACL,QAAQ,CAAG,QAAZ,CAAsB,CAChCM,MAAM,CAAE,MADwB,CAEhCC,OAAO,CAAE,GAAIC,CAAAA,OAAJ,CAAY,CAAE,eAAgB,kBAAlB,CAAZ,CAFuB,CAGhCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeT,IAAf,CAH0B,CAAtB,CAAL,CAKJU,IALI,0FAKC,iBAAOC,GAAP,wHACJV,OAAO,CAACC,GAAR,CAAY,oBAAsBS,GAAlC,EADI,IAEAA,GAAG,CAACC,EAFJ,gEAIcD,CAAAA,GAAG,CAACE,IAAJ,EAJd,QAIIC,CAJJ,eAKAb,OAAO,CAACC,GAAR,CAAYY,CAAZ,EALA,gCAMOA,CANP,4DAQAb,OAAO,CAACC,GAAR,CAAY,mCAAZ,EARA,aAUI,IAAIa,CAAAA,KAAJ,CAAU,sBAAV,CAVJ,sEALD,gEAkBJL,IAlBI,CAkBC,eAAe,IAAZM,CAAAA,KAAY,OAAZA,KAAY,CACnBf,OAAO,CAACC,GAAR,CAAY,4CAA8Cc,KAA1D,EACAnB,YAAY,CAACoB,QAAb,CAAsBD,KAAtB,EACD,CArBI,CAAP,CAsBA;AACA;AACD,CAED,QAASE,CAAAA,OAAT,EAAmB,CACjB,MAAOrB,CAAAA,YAAY,CAACsB,gBAAb,EAAP,CACD,CAED,QAASC,CAAAA,MAAT,EAAkB,CAChBvB,YAAY,CAACwB,WAAb,GACD,CAED,QAASC,CAAAA,KAAT,CAAeC,KAAf,CAAsB,CACpB,MAAOpB,CAAAA,KAAK,CAACL,QAAQ,CAAG,OAAZ,CAAqB,CAC/BM,MAAM,CAAE,MADuB,CAE/BC,OAAO,CAAE,GAAIC,CAAAA,OAAJ,CAAY,CAAE,eAAgB,kBAAlB,CAAZ,CAFsB,CAG/BC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAec,KAAf,CAHyB,CAArB,CAAL,CAKJb,IALI,CAKC,SAACC,GAAD,CAAS,CACb;AACA,GAAIA,GAAG,CAACC,EAAR,CAAY,MAAOD,CAAAA,GAAG,CAACE,IAAJ,EAAP,CACZ,KAAM,IAAIE,CAAAA,KAAJ,CAAU,kBAAV,CAAN,CACD,CATI,EAUJL,IAVI,CAUC,mBAAGM,CAAAA,KAAH,OAAGA,KAAH,OAAenB,CAAAA,YAAY,CAACoB,QAAb,CAAsBD,KAAtB,CAAf,EAVD,CAAP,CAWD,CAED,QAASQ,CAAAA,IAAT,CAAcxB,IAAd,CAAoB,CAClBC,OAAO,CAACC,GAAR,CAAY,8BAAgCF,IAA5C,EACD,CAED,cAAe,CACbD,MAAM,CAANA,MADa,CAEbmB,OAAO,CAAPA,OAFa,CAGbE,MAAM,CAANA,MAHa,CAIbE,KAAK,CAALA,KAJa,CAKbE,IAAI,CAAJA,IALa,CAAf","sourcesContent":["import tokenService from \"./tokenService\";\r\n\r\nconst BASE_URL = \"/api/users/\";\r\n\r\nfunction signup(user) {\r\n  console.log(\"I made it to the signup\");\r\n  return fetch(BASE_URL + \"signup\", {\r\n    method: \"POST\",\r\n    headers: new Headers({ \"Content-Type\": \"application/json\" }),\r\n    body: JSON.stringify(user),\r\n  })\r\n    .then(async (res) => {\r\n      console.log(\"we got a result! \" + res);\r\n      if (res.ok) {\r\n        try {\r\n          let x = await res.json();\r\n          console.log(x);\r\n          return x;\r\n        } catch (err) {\r\n          console.log(\"this is the catch err\" + err);\r\n        }\r\n        throw new Error(\"Email already taken!\");\r\n      }\r\n    })\r\n    .then(({ token }) => {\r\n      console.log(\"this is the token part of signup function\" + token);\r\n      tokenService.setToken(token);\r\n    });\r\n  // The above could have been written as\r\n  //.then((token) => token.token);\r\n}\r\n\r\nfunction getUser() {\r\n  return tokenService.getUserFromToken();\r\n}\r\n\r\nfunction logout() {\r\n  tokenService.removeToken();\r\n}\r\n\r\nfunction login(creds) {\r\n  return fetch(BASE_URL + \"login\", {\r\n    method: \"POST\",\r\n    headers: new Headers({ \"Content-Type\": \"application/json\" }),\r\n    body: JSON.stringify(creds),\r\n  })\r\n    .then((res) => {\r\n      // Valid login if we have a status of 2xx (res.ok)\r\n      if (res.ok) return res.json();\r\n      throw new Error(\"Bad Credentials!\");\r\n    })\r\n    .then(({ token }) => tokenService.setToken(token));\r\n}\r\n\r\nfunction test(user) {\r\n  console.log(\"this is the test function! \" + user);\r\n}\r\n\r\nexport default {\r\n  signup,\r\n  getUser,\r\n  logout,\r\n  login,\r\n  test,\r\n};\r\n"]},"metadata":{},"sourceType":"module"}